# Motor Assisted Commutator for High-fidelity Electro- and Opto-Physiological Tethered Experiments (MACHETE) 

Designed by members of the [Pégard](https://www.nicolaspegard.com/) and [Rodríguez-Romaguera](https://www.rodriguezromagueralab.org/) Labs at the University of North Carolina at Chapel Hill, **MACHETE** is a motor assisted commutator that allows researchers to capture high-fidelity electro- and opto-physiological data during tethered freely-moving behavior experiments with mice. 

![](https://github.com/jovantormesvaquerano/MACHETE/blob/1f612040ef89f95765fda0b4236215fa1402d8f6/MACHETE_Cover.png)

# Custom Arduino Printed Circuit Board Shield:
Our motor assisted commutator is driven and controlled by an Arduino Nano 3.x, integrated within a pair of custom printed circuit boards (PCBs) which allow users to interface with both data aquisition computers and existing commercial optogenetic and electrophysiological devices. 

![](https://github.com/jovantormesvaquerano/MACHETE/blob/9aff202ff052d74dd10126f3546e61ae72f81fe1/MACHETE_PCBs.png)

# Commercially Available and Custom Made Parts 

The following [component list](https://github.com/jovantormesvaquerano/MACHETE/blob/bd38f78877306293dac34d38455146c2f5d1ffb2/1-MACHETE-Components-Table.pdf) details the manufacturer, part number, and quantity of each item required to build MACHETE within your own laboratory. 

<table class="table table-bordered table-hover table-condensed">
<thead><tr><th title="Field #1">Part Number</th>
<th title="Field #2">Distributor</th>
<th title="Field #3">Part Name</th>
<th title="Field #4">Distributor Part Number</th>
<th title="Field #5">Quantity Needed</th>
<th title="Field #6">Unit Price</th>
<th title="Field #7">Total Price</th>
</tr></thead>
<tbody><tr>
<td align="right">1</td>
<td>Digikey</td>
<td>Micro USB 2.0 Connector</td>
<td>609-4613-1-ND</td>
<td>1</td>
<td>$0.57</td>
<td>$0.57</td>
</tr>
<tr>
<td align="right">2</td>
<td>Digikey</td>
<td>Connector Receptacle</td>
<td>WM3917CT-ND</td>
<td>1</td>
<td>$0.57</td>
<td>$0.57</td>
</tr>
<tr>
<td align="right">3</td>
<td>Digikey</td>
<td>Resistor 390 Ohm</td>
<td>311-390CRCT-ND</td>
<td>1</td>
<td>$0.10</td>
<td>$0.10</td>
</tr>
<tr>
<td align="right">4</td>
<td>Digikey</td>
<td>Toggle Switch</td>
<td>CKN1783CT-ND</td>
<td>1</td>
<td>$7.48</td>
<td>$7.48</td>
</tr>
<tr>
<td align="right">5</td>
<td>Digikey</td>
<td>Arduino Nano 3.x</td>
<td>1050-1001-ND</td>
<td>1</td>
<td>$24.09</td>
<td>$24.09</td>
</tr>
<tr>
<td align="right">6</td>
<td>Digikey</td>
<td>Mini USB 2.0 Connector</td>
<td>UE25BE5510H-ND</td>
<td>1</td>
<td>$0.91</td>
<td>$0.91</td>
</tr>
<tr>
<td align="right">7</td>
<td>Digikey</td>
<td>Right Angle Connector</td>
<td>WM1743-ND</td>
<td>1</td>
<td>$0.32</td>
<td>$0.32</td>
</tr>
<tr>
<td align="right">8</td>
<td>Digikey</td>
<td>Resistor 100k Ohm 0805</td>
<td>311-100KCRCT-ND</td>
<td>6</td>
<td>$0.10 </td>
<td>$0.60 </td>
</tr>
<tr>
<td align="right">9</td>
<td>Digikey</td>
<td>Hall Effect Sensor</td>
<td>AS5600-ASOMCT-ND</td>
<td>1</td>
<td>$4.55</td>
<td>$4.55</td>
</tr>
<tr>
<td align="right">10</td>
<td>Digikey</td>
<td>Capacitor 1 µF 0805</td>
<td>1276-1066-1-ND</td>
<td>1</td>
<td>$0.10</td>
<td>$0.10</td>
</tr>
<tr>
<td align="right">11</td>
<td>Digikey</td>
<td>Capacitor 10 µF 0805</td>
<td>445-7644-1-ND</td>
<td>1</td>
<td>$0.18</td>
<td>$0.18</td>
</tr>
<tr>
<td align="right">12</td>
<td>Digikey</td>
<td>Connector Receptacle</td>
<td>WM4783CT-ND</td>
<td>1</td>
<td>$0.79</td>
<td>$0.79</td>
</tr>
<tr>
<td align="right">13</td>
<td>Digikey</td>
<td>Resistor 10k Ohm 0805</td>
<td>RMCF0805FT10K0CT-ND</td>
<td>2</td>
<td>$0.10</td>
<td>$0.20</td>
</tr>
<tr>
<td align="right">14</td>
<td>Digikey</td>
<td>Motor Driver 20-QFN (3x3)</td>
<td>175-TMC6300-LA-TCT-ND</td>
<td>1</td>
<td>$3.36</td>
<td>$3.36</td>
</tr>
<tr>
<td align="right">15</td>
<td>Digikey</td>
<td>Resistor 120 mOhms 0805</td>
<td>RL12S.12FCT-ND</td>
<td>1</td>
<td>$0.25</td>
<td>$0.25</td>
</tr>
<tr>
<td align="right">16</td>
<td>Digikey</td>
<td>Capacitor 0.1 µF 0805</td>
<td>478-KGM21NR71H104KTCT-ND</td>
<td>3</td>
<td>$0.10 </td>
<td>$0.30 </td>
</tr>
<tr>
<td align="right">17</td>
<td>Digikey</td>
<td>Brushless DC Motor</td>
<td>1568-ROB-20441-ND</td>
<td>1</td>
<td>$29.95</td>
<td>$29.95</td>
</tr>
<tr>
<td align="right">18</td>
<td>Mouser</td>
<td>Red LED</td>
<td>696-SMLFT0805SRCTR</td>
<td>1</td>
<td>$0.36</td>
<td>$0.36</td>
</tr>
<tr>
<td align="right">19</td>
<td>Adafruit</td>
<td>M3 x 4mm threaded insert</td>
<td>4255</td>
<td>1 (Pack of 50)</td>
<td>$5.36</td>
<td>$5.36</td>
</tr>
<tr>
<td align="right">20</td>
<td>Thorlabs</td>
<td>Mini Optical Post</td>
<td>MS3R</td>
<td>1</td>
<td>$9.09 </td>
<td>$9.09 </td>
</tr>
<tr>
<td align="right">21</td>
<td>Thorlabs</td>
<td>Aluminum Breadboard 8&quot; x 10&quot; x 1/2&quot;, 1/4&quot;-20 Taps</td>
<td>MB810</td>
<td>1</td>
<td>$131.60 </td>
<td>$131.60 </td>
</tr>
<tr>
<td align="right">22</td>
<td>Thorlabs</td>
<td>Aluminum Breadboard 12&quot; x 18&quot; x 1/2&quot;, 1/4&quot;-20 Taps</td>
<td>MB1218</td>
<td>1</td>
<td>$214.65 </td>
<td>$214.65 </td>
</tr>
<tr>
<td align="right">23</td>
<td>Thorlabs</td>
<td>Breadboard Lifting Handles, Reinforced Polymer </td>
<td>BBH1</td>
<td>2 (Pack of 2)</td>
<td>$17.01 </td>
<td>$17.01 </td>
</tr>
<tr>
<td align="right">24</td>
<td>Thorlabs</td>
<td>4-40 Stainless Steel Cap Screw, 3/8&quot; Long</td>
<td>SH4S038</td>
<td>1 (Pack of 50)</td>
<td>$9.31 </td>
<td>$9.31 </td>
</tr>
<tr>
<td align="right">25</td>
<td>Thorlabs</td>
<td>Spring-Loaded 3/16&quot; Hex-Locking Thumbscrew, 1/4&quot;-20 Thread</td>
<td>TS25H</td>
<td>2</td>
<td>$2.87 </td>
<td>$5.74 </td>
</tr>
<tr>
<td align="right">26</td>
<td>Thorlabs</td>
<td>1/4&quot;-20 Stainless Steel Setscrew, 5/8&quot; Long (Adaptor)</td>
<td>SS25S0625</td>
<td>1 (Pack of 25)</td>
<td>$6.97 </td>
<td>$6.97 </td>
</tr>
<tr>
<td align="right">27</td>
<td>Thorlabs</td>
<td>1/4&quot; Washer, M6 Compatible, Stainless Steel</td>
<td>W25S050</td>
<td>1 (Pack of 100)</td>
<td>$10.20 </td>
<td>$10.20 </td>
</tr>
<tr>
<td align="right">28</td>
<td>Thorlabs</td>
<td>1/4&quot;-20 Stainless Steel Nut</td>
<td>N25S0440</td>
<td>1 (Pack of 50)</td>
<td>$6.43 </td>
<td>$6.43 </td>
</tr>
<tr>
<td align="right">29</td>
<td>Omron</td>
<td>Rotary Encoder - 1024 P/R (Quadrature)</td>
<td>E6B2-CWZ3E (E69-C06B)</td>
<td>1</td>
<td>$48.50 </td>
<td>$48.50 </td>
</tr>
<tr>
<td align="right">30</td>
<td>DB Unlimited</td>
<td>Speaker 80hm 5 w top port 104db</td>
<td>2104-SP500208-3-ND</td>
<td>1</td>
<td>$6.79 </td>
<td>$6.79 </td>
</tr>
<tr>
<td align="right">31</td>
<td>SullinsCorp</td>
<td>2.54mm Pitch Single Row Pin Header Strip</td>
<td>PREC040SAAN-RC</td>
<td>3</td>
<td>$1.53</td>
<td>$1.53</td>
</tr>
<tr>
<td align="right">32</td>
<td>Ardest</td>
<td>2N2222 NPN TO-92 Power Transistors</td>
<td>2N2222</td>
<td>6</td>
<td>$1.44</td>
<td>$1.44</td>
</tr>
<tr>
<td align="right">33</td>
<td>Boca Bearings</td>
<td>5 mm Steel Ball Bearing</td>
<td>SMR115-ZZC #5 LD</td>
<td>2</td>
<td>$10.58 </td>
<td>$21.16 </td>
</tr>
<tr>
<td align="right">34</td>
<td>Xenocam</td>
<td>9-22mm 1/3" F1.4 M12-mount lens with IR filter</td>
<td>XC0922LENS</td>
<td>1</td>
<td>$19.99 </td>
<td>$19.99 </td>
</tr>
<tr>
<td align="right">35</td>
<td>Monoprice</td>
<td>USB 2.0 Type-A Male to Mini-B 5pin Male Cable (Monoprice)</td>
<td>B002KL8J8W</td>
<td>1</td>
<td>$4.78</td>
<td>$4.78</td>
</tr>
<tr>
<td align="right">36</td>
<td>Computar</td>
<td>0.33-Inch Varifocal lens 2.8-12mm F1.3 Auto Iris (Computar)</td>
<td>B002HRE2ZS / TG4Z2813FCS-IR</td>
<td>1(Used)</td>
<td>$19.99 </td>
<td>$19.99 </td>
</tr>
<tr>
<td align="right">37</td>
<td>Chanzon</td>
<td>3 mm UV light, 395-400nm (Chanzon)</td>
<td>100F3T-YT-WH-PU</td>
<td>1 (Pack of 100)</td>
<td>$6.99 </td>
<td>$6.99 </td>
</tr>
<tr>
<td align="right">38</td>
<td>Adafruit</td>
<td>5 mm super-bright IR LED, 940nm (Adafruit)</td>
<td>ADA388 / B00ULB0U44</td>
<td>1 (Pack of 25)</td>
<td>$10.98 </td>
<td>$10.98 </td>
</tr>
<tr>
<td align="right">39</td>
<td>Fermerry</td>
<td>24 AWG 50 feet Electrical Wire (Fermerry)</td>
<td>B089CX3FVV</td>
<td>1</td>
<td>$26.99 </td>
<td>$26.99 </td>
</tr>
<tr>
<td align="right">40</td>
<td>Arduino</td>
<td>Arduino Mega 2560 Rev3 Microcontroller Board (Arduino)</td>
<td>A000067 / B0046AMGW0</td>
<td>1</td>
<td>$48.99 </td>
<td>$48.99 </td>
</tr>
<tr>
<td align="right">41</td>
<td>Arduino</td>
<td>USB 2.0 Cable Type A/B (Arduino)</td>
<td>M000006 / B013EOQUAW</td>
<td>1</td>
<td>$7.00 </td>
<td>$7.00 </td>
</tr>
<tr>
<td align="right">42</td>
<td>Tnisesm</td>
<td>PCB Mount Screw Terminal Block Connectors (Tnisesm)</td>
<td>CATN-T03B</td>
<td>1</td>
<td>$8.99 </td>
<td>$8.99 </td>
</tr>
<tr>
<td align="right">43</td>
<td>Adeep</td>
<td>Real Time Clock Module DS3231 AT24C32 IIC (Adeept)</td>
<td>2pcsDS3231 / B097PMNMQZ</td>
<td>1 (Pack of 2)</td>
<td>$7.99 </td>
<td>$7.99 </td>
</tr>
<tr>
<td align="right">44</td>
<td>LiCB</td>
<td>3V Lithium Battery (Junpower)</td>
<td>CR2032 / B07LGL9LQ1</td>
<td>1 (Pack of 10)</td>
<td>$4.99 </td>
<td>$4.99 </td>
</tr>
<tr>
<td align="right">45</td>
<td>ELECFUN</td>
<td>Heat Shrink Tubing (Electfun)</td>
<td>RSG-KIT350</td>
<td>1</td>
<td>$14.99 </td>
<td>$14.99 </td>
</tr>
<tr>
<td align="right">46</td>
<td>Yancorp</td>
<td>Black Adhesive contact paper (Yancorp)</td>
<td>B082CPSVPW</td>
<td>1</td>
<td>$6.98 </td>
<td>$6.98 </td>
</tr>
<tr>
<td align="right">47</td>
<td>Weld-On</td>
<td>IPS Weld-On 3 Acrylic Plastic Cement (Weld-On)</td>
<td>?TLLPN-21847771</td>
<td>1</td>
<td>$28.55 </td>
<td>$28.55 </td>
</tr>
<tr>
<td align="right">48</td>
<td>CENTROPOWER</td>
<td>12V 5A DC Power Cable Male Female Connector (Centro Power)</td>
<td>DCCORD-MF</td>
<td>1 (Pack of 10)</td>
<td>$9.19 </td>
<td>$9.19 </td>
</tr>
<tr>
<td align="right">49</td>
<td>CENTROPOWER</td>
<td>12V DC Power Connector Barrel Adaptor (Centro Power)</td>
<td>B07C61434H</td>
<td>1 (Pack of 10)</td>
<td>$7.99 </td>
<td>$7.99 </td>
</tr>
<tr>
<td align="right">50</td>
<td>ALITOVE</td>
<td>12V Red LED Flexible Strip Ribbon Light (Alitrove, 16.4 feet)</td>
<td>AL5RWPBK12V</td>
<td>1</td>
<td>$13.99 </td>
<td>$13.99 </td>
</tr>
<tr>
<td align="right">51</td>
<td>Mifasopower</td>
<td>Power Strip Surge Protector 10Ft (Mifaso Power)</td>
<td>MFS311T</td>
<td>1</td>
<td>$19.99 </td>
<td>$19.99 </td>
</tr>
<tr>
<td align="right">52</td>
<td>Sumato Stuff</td>
<td>Anti Vibration Pads (Functional Necessities)</td>
<td>SSHI00003</td>
<td>1 (Pack of 4)</td>
<td>$14.99 </td>
<td>$14.99 </td>
</tr>
<tr>
<td align="right">53</td>
<td>Focusound</td>
<td>1&quot; x 12&quot; x 12&quot; Sound Absorption Wall Panels (Xin &amp; Log)</td>
<td>FS0302A</td>
<td>1 (Pack of 24)</td>
<td>$17.99 </td>
<td>$17.99 </td>
</tr>
<tr>
<td align="right">54</td>
<td>TANTTI</td>
<td>4 inch Zip Ties with 18 lb Tensile Strength</td>
<td>604477847283</td>
<td>1 (Pack of 200)</td>
<td>$3.99 </td>
<td>$3.99 </td>
</tr>
<tr>
<td align="right">55</td>
<td>3M</td>
<td>3M Scotch Super 33+ Electrical Tape - 3/4 in x 52 ft</td>
<td>MMM06133</td>
<td>1</td>
<td>$4.98 </td>
<td>$4.98 </td>
</tr>
<tr>
<td align="right">56</td>
<td>Amazon</td>
<td>Hirose 4 Pin Female HR10A-7P-4S to Flying Leads Power Cable (Alvin’s Cables)</td>
<td>HR10A-7P-4S(73)</td>
<td>1</td>
<td>$25.99 </td>
<td>$25.99</td>
</tr>
<tr>
<td align="right">57</td>
<td>Custom Machined Parts</td>
<td>Rotary Encoder Adaptor (Aluminum 304)</td>
<td>CNC Machining (eMachineShop)</td>
<td>6 (Bulk Purchase)</td>
<td>$28.43 </td>
<td>$170.62 </td>
</tr>
<tr>
<td align="right">58</td>
<td>Custom Machined Parts</td>
<td>Head Plate Holder (Aluminum 304)</td>
<td>CNC Machining (eMachineShop)</td>
<td>12 (Bulk Purchase)</td>
<td>$30.20 </td>
<td>$362.44 </td>
</tr>
<tr>
<td align="right">59</td>
<td>Custom Machined Parts</td>
<td>Head Plate (Top Piece) (Aluminum 304)</td>
<td>CNC Machining (eMachineShop)</td>
<td>6 (Bulk Purchase)</td>
<td>$39.14 </td>
<td>$234.85 </td>
</tr>
<tr>
<td align="right">60</td>
<td>Custom Machined Parts</td>
<td>Head Plate (Bottom Piece) (Aluminum 304)</td>
<td>CNC Machining (eMachineShop)</td>
<td>6 (Bulk Purchase)</td>
<td>$51.01 </td>
<td>$306.04 </td>
</tr>
<tr>
<td align="right">61</td>
<td>Custom Machined Parts</td>
<td>Head rings (Aluminum 6061-T6)</td>
<td>CNC Machining (eMachineShop)</td>
<td>100 (Bulk Purchase)</td>
<td>$5.16 </td>
<td>$258.22 </td>
</tr>
<tr>
<td align="right">62</td>
<td>Custom Machined Parts</td>
<td>Rotary Wheel (1/8 Thick Clear Cast Acrylic)</td>
<td>Laser Cutting (Ponoko)</td>
<td>2</td>
<td>$61.06 </td>
<td>$61.06 </td>
</tr>
<tr>
<td align="right">63</td>
<td>Custom Machined Parts</td>
<td>Rotary Wheel Curved Surface (Clear Cast Acrylic)</td>
<td>Laser Cutting / Manual Cutting</td>
<td>1</td>
<td>$0.00 </td>
<td>$0.00 </td>
</tr>
<tr>
<td align="right">64</td>
<td>Custom Machined Parts</td>
<td>Rotary Wheel Curved Surface (Black Adhesive Contact Paper)</td>
<td>Laser Cutting / Manual Cutting</td>
<td>1</td>
<td>$0.00 </td>
<td>$0.00 </td>
</tr>
<tr>
<td align="right">65</td>
<td>Custom Machined Parts</td>
<td>Waste Management Ramp (Resin)</td>
<td>3-D Printing (Craftcloud3d)</td>
<td>1</td>
<td>$57.76 </td>
<td>$57.76 </td>
</tr>
<tr>
<td align="right">66</td>
<td>Custom Machined Parts</td>
<td>Arduino Mega 2560 Rev3 Protective Case (Resin)</td>
<td>3-D Printing (Craftcloud3d)</td>
<td>1</td>
<td>$16.06 </td>
<td>$16.06 </td>
</tr>
<tr>
<td align="right">67</td>
<td>Custom Machined Parts</td>
<td>Arduino Mega 2560 Rev3 Shield SMT PCB</td>
<td>PCB Manufacturing (JLC PCB)</td>
<td>1</td>
<td>X</td>
<td>X</td>
</tr>
<tr>
<td align="right">68</td>
<td>FLIR</td>
<td>Firefly S Camera</td>
<td>FFY-U3-16S2M-S</td>
<td>1</td>
<td>$234.00 </td>
<td>$234.00 </td>
</tr>
<tr>
<td align="right">69</td>
<td>FLIR</td>
<td>Tripod Adapter for Firefly S Camera</td>
<td>ACC-01-0017</td>
<td>1</td>
<td>$32.10 </td>
<td>$32.10 </td>
</tr>
<tr>
<td align="right">70</td>
<td>FLIR</td>
<td>USB 3.1 Locking Cable</td>
<td>ACC-01-2300</td>
<td>1</td>
<td>$24.60 </td>
<td>$24.60 </td>
</tr>
<tr>
<td align="right">71</td>
<td>FLIR</td>
<td>GPIO cable w/ 6 pins</td>
<td>ACC-01-3015</td>
<td>1</td>
<td>$9.60 </td>
<td>$9.60 </td>
</tr>
<tr>
<td align="right">72</td>
<td>The Imaging Source</td>
<td>USB 2.0 CMOS Monochrome Camera</td>
<td>DMK-22BUC03</td>
<td>1</td>
<td>$234.00 </td>
<td>$234.00 </td>
</tr>
<tr>
<td align="right">73</td>
<td>SYSRACKS</td>
<td>15U 35&quot; Depth Under Desk Sound Proof Server Cabinet</td>
<td>SP15.900</td>
<td>1</td>
<td>$1,122.00 </td>
<td>$1,122.00 </td>
</tr>
</tbody></table>


This [document](https://github.com/jovantormesvaquerano/MACHETE/blob/bd38f78877306293dac34d38455146c2f5d1ffb2/3-MACHETE-Custom-Parts-Table.pdf) outlines the design of each of the custom pieces and the file types found within this repository that can be used to replicate the system. The following [spreadsheet](https://github.com/jovantormesvaquerano/MACHETE/blob/bd38f78877306293dac34d38455146c2f5d1ffb2/2-MACHETE-Bill-of-Materials-and-Assembly-Spreadsheet.xlsx) outlines the total cost of the motor assisted commutator.  

**Here is a list of the manufacturers we purchased materials from:** 
- Digikey
- Mouser
- Adafruit 
- McMaster-Carr
- Taidacent
- K&J Magnetics, Inc
- Maxx Model

**Here is a list of companies you can purchase custom parts from, if not fabricated in-house:**
- Craftcloud3d (3-D Printing)
- JBL PCB (PCB Printing / Fabrication)

# Step-by-Step Building Guide

![](https://github.com/jovantormesvaquerano/MACHETE/blob/f80b868b4070a44c69ba11947aaf63490b757ae4/MACHETE_Steps.png)

This following [guide]() provides a step-by-step walkthrough for building and testing each component of our motor assisted commutator. This document includes diagrams and explanations for assembling each component. 

# Software Installation Guide and Dependencies

Following this installation guide will ensure that your MACHETE system will be able to run the required Arduino IDE sketches to function. 

**Required Software and Applications**:
- [Arduino IDE](https://www.arduino.cc/en/software)
- [DeepLabCuts](https://github.com/DeepLabCut/DeepLabCut)
  
# Contact

Further information and requests for resources should be directed to and will be fulfilled by the lead author, Jose Rodriguez-Romaguera (jose_rodriguezromaguera@med.unc.edu). Example commutator data is available upon request to the corresponding author, Nicolas C. Pégard (pegard@unc.edu).

# Citation 

If you replicate this system in your own labs or use parts of our designs and code, we kindly ask that you please cite this [page](https://github.com/UNC-optics) [1]. 
